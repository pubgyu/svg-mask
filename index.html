<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>svg canvas mask</title>
</head>
<style>
html,body {position:relative;width:100%;height:100%;margin:0;padding:0;}
#wrap {position:relative;width:100%;height:100%;font-size:0;}
.sticky-wrap .fixed-inner {position:sticky;top:0;left:0;}
.sticky-wrap .fixed-inner canvas {position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;}
.sticky-wrap .fixed-inner video {position:absolute;top:0;left:0;width:auto;height:auto;min-width:100%;min-height:100%;}
.sticky-wrap .button-wrap {position:absolute;top:0;left:0;z-index:10;}
.sticky-wrap .svg-wrap {display:none;}
.sticky-wrap .dg {position:relative;z-index:100;}

.sticky-wrap {position:relative;height:5000px;box-sizing:border-box;}
.fixed-inner {position:relative;top:0;width:100%;height:100vh;z-index:1;overflow:hidden;}
.fixed-inner.o-sticky {position:sticky;}
.fixed-inner.o-fixed {position:fixed;}
.fixed-content {position:absolute;top:50%;left:0;width:100%;height:100%;background-color:purple;transform:translateY(-50%);}
</style>
<body>
	<div id="wrap">
		<article class="sticky-wrap">
			<div class="fixed-inner">
				<div class="fixed-content">
					<div class="button-wrap">
						<button class="svg-play">재생</button>
						<button class="svg-pause">일시 정지</button>
						<button class="svg-stop">정지</button>
						<button class="svg-destroy">파괴</button>
						<button class="svg-init">생성</button>
					</div>
					<canvas class="svg-motion"></canvas>
					<div class="svg-wrap x-svg">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1000" height="210" viewBox="0 0 1000 210" style="enable-background:new 0 0 1000 210;" xml:space="preserve">
							<g>
								<path d="M4.52,5.53H73.1c10.42,0,20.02,1.88,28.8,5.62c8.78,3.75,16.36,8.83,22.77,15.22c6.4,6.4,11.43,13.95,15.09,22.63
									c3.66,8.69,5.49,17.97,5.49,27.84s-1.83,19.2-5.49,27.98c-3.66,8.78-8.69,16.37-15.09,22.77c-6.4,6.4-14.04,11.48-22.9,15.22
									c-8.87,3.75-18.52,5.62-28.94,5.62h-31v57.33H4.52V5.53z M41.83,40.09v73.79h28.53c5.49,0,10.51-0.96,15.09-2.88
									c4.57-1.92,8.5-4.57,11.8-7.96c3.29-3.38,5.85-7.31,7.68-11.79c1.83-4.48,2.74-9.28,2.74-14.4c0-5.12-0.92-9.92-2.74-14.4
									c-1.83-4.48-4.39-8.37-7.68-11.66c-3.29-3.29-7.23-5.9-11.8-7.82c-4.57-1.92-9.6-2.88-15.09-2.88H41.83z"/>
								<path d="M235.76,208.51c-10.42,0-20.02-1.51-28.8-4.53s-16.42-7.54-22.9-13.58c-6.49-6.03-11.52-13.53-15.09-22.49
									c-3.57-8.96-5.35-19.38-5.35-31.27V5.53h37.31v133.31c0,4.94,0.87,9.56,2.61,13.85c1.74,4.3,4.16,8,7.27,11.11
									c3.11,3.11,6.76,5.58,10.97,7.41c4.2,1.83,8.78,2.74,13.72,2.74s9.51-0.91,13.72-2.74c4.2-1.83,7.91-4.29,11.11-7.41
									c3.2-3.11,5.71-6.81,7.54-11.11c1.83-4.29,2.74-8.92,2.74-13.85V5.53h37.31v131.12c0,11.89-1.83,22.31-5.49,31.27
									c-3.66,8.96-8.69,16.46-15.09,22.49c-6.4,6.04-13.99,10.56-22.77,13.58S246.18,208.51,235.76,208.51z"/>
								<path d="M330.67,5.53h63.09c22.12,0,39.27,4.76,51.43,14.26c12.16,9.51,18.24,23.41,18.24,41.69c0,17.38-7.32,30.36-21.94,38.95
									c9.33,4.21,16.5,10.15,21.53,17.83c5.03,7.68,7.54,17.1,7.54,28.25c0,19.75-6.45,34.56-19.34,44.44
									c-12.89,9.88-30.4,14.81-52.53,14.81h-68.03V5.53z M367.97,39.81v45.54h25.78c11.89,0,20.2-2.19,24.96-6.58
									c4.75-4.39,7.13-10.15,7.13-17.28c0-7.5-2.47-12.98-7.41-16.46c-4.94-3.47-13.17-5.21-24.69-5.21H367.97z M367.97,120.19v51.29
									h30.72c11.34,0,19.89-2.24,25.65-6.72c5.76-4.48,8.64-10.83,8.64-19.06c0-4.02-0.6-7.63-1.78-10.83c-1.19-3.2-3.15-5.9-5.9-8.09
									s-6.4-3.84-10.97-4.94c-4.57-1.1-10.33-1.65-17.28-1.65H367.97z"/>
								<path d="M586.32,208.51c-15.73,0-29.95-2.74-42.66-8.23c-12.71-5.49-23.64-12.93-32.78-22.36c-9.15-9.42-16.18-20.34-21.12-32.78
									c-4.94-12.43-7.41-25.6-7.41-39.5c0-14.26,2.56-27.66,7.68-40.19c5.12-12.52,12.21-23.41,21.26-32.64
									c9.05-9.23,19.84-16.55,32.37-21.94c12.53-5.39,26.2-8.09,41.01-8.09c10.42,0,20.2,1.28,29.35,3.84
									c9.14,2.56,17.6,6.08,25.38,10.56c7.77,4.48,14.72,9.88,20.85,16.18c6.12,6.31,11.29,13.21,15.5,20.71l-32.92,19.75
									c-6.22-11.52-14.13-20.2-23.73-26.06c-9.6-5.85-20.98-8.78-34.15-8.78c-9.33,0-17.97,1.78-25.92,5.35s-14.91,8.37-20.85,14.4
									c-5.95,6.03-10.56,13.08-13.85,21.12c-3.29,8.05-4.94,16.64-4.94,25.78c0,9.33,1.65,18.02,4.94,26.06
									c3.29,8.05,7.91,15.09,13.85,21.12c5.94,6.04,13.03,10.79,21.26,14.26c8.23,3.48,17.19,5.21,26.88,5.21
									c14.99,0,27.47-3.93,37.44-11.8c9.96-7.86,16.78-18.38,20.44-31.54h-63.91V93.3h103.96v14.81c0,13.54-2.29,26.38-6.86,38.54
									c-4.57,12.16-11.11,22.81-19.61,31.96c-8.5,9.15-18.79,16.42-30.86,21.81C614.85,205.81,601.31,208.51,586.32,208.51z"/>
								<path d="M739.66,110.86L676.02,5.53h41.15l41.42,69.4l41.69-69.4h41.15l-64.46,106.16v94.09h-37.31V110.86z"/>
								<path d="M925.64,208.51c-10.42,0-20.02-1.51-28.8-4.53c-8.78-3.02-16.42-7.54-22.9-13.58c-6.49-6.03-11.52-13.53-15.09-22.49
									c-3.57-8.96-5.35-19.38-5.35-31.27V5.53h37.31v133.31c0,4.94,0.87,9.56,2.61,13.85c1.74,4.3,4.16,8,7.27,11.11
									c3.11,3.11,6.76,5.58,10.97,7.41c4.2,1.83,8.78,2.74,13.71,2.74s9.51-0.91,13.72-2.74c4.2-1.83,7.91-4.29,11.11-7.41
									c3.2-3.11,5.71-6.81,7.54-11.11c1.83-4.29,2.74-8.92,2.74-13.85V5.53h37.31v131.12c0,11.89-1.83,22.31-5.49,31.27
									c-3.66,8.96-8.69,16.46-15.09,22.49c-6.4,6.04-13.99,10.56-22.77,13.58C945.66,207,936.06,208.51,925.64,208.51z"/>
							</g>
						</svg>
					</div>
					<div class="svg-wrap y-svg">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 110 700" width="110" height="700" style="enable-background:new 0 0 110 700;" xml:space="preserve">
							<g>
								<path d="M18.51,3.77h36.71c5.58,0,10.72,1.01,15.42,3.01c4.7,2.01,8.76,4.72,12.19,8.15c3.43,3.43,6.12,7.47,8.08,12.12
									c1.96,4.65,2.94,9.62,2.94,14.91s-0.98,10.28-2.94,14.98c-1.96,4.7-4.65,8.76-8.08,12.19c-3.43,3.43-7.51,6.15-12.26,8.15
									c-4.75,2.01-9.91,3.01-15.49,3.01H38.48v30.69H18.51V3.77z M38.48,22.27v39.5h15.27c2.94,0,5.63-0.51,8.08-1.54
									c2.45-1.03,4.55-2.45,6.31-4.26c1.76-1.81,3.13-3.91,4.11-6.31c0.98-2.4,1.47-4.97,1.47-7.71c0-2.74-0.49-5.31-1.47-7.71
									c-0.98-2.4-2.35-4.48-4.11-6.24c-1.76-1.76-3.87-3.16-6.31-4.19c-2.45-1.03-5.14-1.54-8.08-1.54H38.48z"/>
								<path d="M55,229.44c-5.58,0-10.72-0.81-15.42-2.42s-8.79-4.04-12.26-7.27c-3.48-3.23-6.17-7.24-8.08-12.04
									c-1.91-4.8-2.86-10.38-2.86-16.74v-70.2h19.97v71.37c0,2.64,0.46,5.12,1.4,7.42c0.93,2.3,2.23,4.28,3.89,5.95
									c1.66,1.67,3.62,2.99,5.87,3.96c2.25,0.98,4.7,1.47,7.34,1.47c2.64,0,5.09-0.49,7.34-1.47c2.25-0.98,4.23-2.3,5.95-3.96
									c1.71-1.66,3.06-3.65,4.04-5.95c0.98-2.3,1.47-4.77,1.47-7.42v-71.37h19.97v70.2c0,6.37-0.98,11.95-2.94,16.74
									c-1.96,4.8-4.65,8.81-8.08,12.04c-3.43,3.23-7.49,5.65-12.19,7.27S60.58,229.44,55,229.44z"/>
								<path d="M19.1,237.77h33.78c11.84,0,21.02,2.55,27.54,7.64c6.51,5.09,9.77,12.53,9.77,22.32c0,9.3-3.92,16.25-11.75,20.85
									c4.99,2.25,8.83,5.43,11.53,9.55c2.69,4.11,4.04,9.16,4.04,15.13c0,10.57-3.45,18.5-10.35,23.79s-16.28,7.93-28.12,7.93H19.1
									V237.77z M39.07,256.12v24.38h13.8c6.36,0,10.82-1.17,13.36-3.52c2.54-2.35,3.82-5.43,3.82-9.25c0-4.01-1.32-6.95-3.96-8.81
									c-2.64-1.86-7.05-2.79-13.22-2.79H39.07z M39.07,299.15v27.46h16.45c6.07,0,10.65-1.2,13.73-3.6c3.08-2.4,4.63-5.8,4.63-10.21
									c0-2.15-0.32-4.09-0.95-5.8c-0.64-1.71-1.69-3.16-3.16-4.33c-1.47-1.17-3.43-2.06-5.87-2.64c-2.45-0.59-5.53-0.88-9.25-0.88H39.07z
									"/>
								<path d="M56.62,463.44c-8.42,0-16.03-1.47-22.84-4.41c-6.81-2.94-12.65-6.92-17.55-11.97c-4.9-5.04-8.66-10.89-11.31-17.55
									c-2.64-6.66-3.96-13.71-3.96-21.15c0-7.64,1.37-14.81,4.11-21.51c2.74-6.7,6.53-12.53,11.38-17.48
									c4.85-4.94,10.62-8.86,17.33-11.75c6.7-2.89,14.02-4.33,21.95-4.33c5.58,0,10.82,0.69,15.71,2.06c4.89,1.37,9.42,3.26,13.58,5.65
									c4.16,2.4,7.88,5.29,11.16,8.66c3.28,3.38,6.04,7.07,8.3,11.09l-17.62,10.57c-3.33-6.17-7.56-10.82-12.7-13.95
									c-5.14-3.13-11.23-4.7-18.28-4.7c-4.99,0-9.62,0.95-13.88,2.86s-7.98,4.48-11.16,7.71c-3.18,3.23-5.65,7-7.42,11.31
									c-1.76,4.31-2.64,8.91-2.64,13.8c0,4.99,0.88,9.64,2.64,13.95c1.76,4.31,4.23,8.08,7.42,11.31c3.18,3.23,6.98,5.78,11.38,7.64
									c4.41,1.86,9.2,2.79,14.39,2.79c8.03,0,14.71-2.1,20.04-6.31c5.33-4.21,8.98-9.84,10.94-16.89H53.38v-19.09h55.66v7.93
									c0,7.25-1.23,14.12-3.67,20.63c-2.45,6.51-5.95,12.21-10.5,17.11c-4.55,4.9-10.06,8.79-16.52,11.67
									C71.89,461.99,64.64,463.44,56.62,463.44z"/>
								<path d="M44.79,528.16l-34.07-56.39h22.03l22.17,37.15l22.32-37.15h22.03L64.77,528.6v50.37H44.79V528.16z"/>
								<path d="M55,697.44c-5.58,0-10.72-0.81-15.42-2.42c-4.7-1.62-8.79-4.04-12.26-7.27c-3.48-3.23-6.17-7.24-8.08-12.04
									c-1.91-4.8-2.86-10.38-2.86-16.74v-70.2h19.97v71.37c0,2.64,0.46,5.12,1.4,7.42c0.93,2.3,2.23,4.28,3.89,5.95
									c1.66,1.67,3.62,2.99,5.87,3.97c2.25,0.98,4.7,1.47,7.34,1.47c2.64,0,5.09-0.49,7.34-1.47c2.25-0.98,4.23-2.3,5.95-3.97
									c1.71-1.66,3.06-3.65,4.04-5.95c0.98-2.3,1.47-4.77,1.47-7.42v-71.37h19.97v70.2c0,6.37-0.98,11.95-2.94,16.74
									c-1.96,4.8-4.65,8.81-8.08,12.04c-3.43,3.23-7.49,5.65-12.19,7.27C65.72,696.63,60.58,697.44,55,697.44z"/>
							</g>
						</svg>

					</div>
				</div>
			</div>
		</article>
	</div>
</body>
<script src="./js/mask-motion.js"></script>
<script>
const stikeyWrap = document.querySelector('.sticky-wrap');
const canvas = document.querySelector('canvas');
const svgNode = document.querySelector('.svg-wrap.x-svg');
const svgimg = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svgNode.innerHTML);
const svgWidth = svgNode.querySelector('svg').getAttribute('width');
const svgHeight = svgNode.querySelector('svg').getAttribute('height');

const svgTextMotion = new SVGTEXT(canvas, {
	// 꼭 넣어야 하는 옵션
	src : svgimg,
	bgSrc : './images/space.jpg',
	viewBoxW: svgWidth,
	viewBoxH: svgHeight,

	// 꼭 안넣어도 되는 공통 옵션
	reverse: false,
	bland: 'source-out',
	bgColor: '#ffffff',
	speed: 0.01,

	// scale 옵션
	mode: 'scale',
	minScale : .1,
	maxScale : 1,
	positionX: 0,
	positionY: 0,
	alignX: 'center',
	alignY: 'center',
	originX: 0,
	originY: 0,
	
	// move x 옵션
	// mode: 'moveX',
	// startP :window.innerWidth,

	// move y 옵션
	// mode: 'moveY',
	// startP: window.innerWidth,

	// event 옵션
	startEvent: function () {
		console.log('start');
	},
	endEvent: function () {
		console.log('end');
	},

	moveNode: stikeyWrap,
	
	bgFadeIn : false,
	bgFadeOut : false,
});


document.querySelector('.svg-play').addEventListener('click', () => {
	svgTextMotion.play();
});
document.querySelector('.svg-pause').addEventListener('click', () => {
	svgTextMotion.pause();
});
document.querySelector('.svg-stop').addEventListener('click', () => {
	svgTextMotion.stop({ reset: true });
});
document.querySelector('.svg-destroy').addEventListener('click', () => {
	svgTextMotion.destroy();
});
document.querySelector('.svg-init').addEventListener('click', () => {
	svgTextMotion.load();
});

window.addEventListener('scroll', () => {
	let percent = Math.max(0, Math.min(1, (window.pageYOffset - stikeyWrap.offsetTop) / (stikeyWrap.clientHeight - window.innerHeight)));

	svgTextMotion.scroll(percent);
});
window.addEventListener('resize', svgTextMotion.resize);
</script>
</html>	